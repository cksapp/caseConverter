<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Converter</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #e0e7ff 0%, #f4f4f4 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 420px;
            background: #fff;
            padding: 2rem 1.5rem;
            border-radius: 18px;
            box-shadow: 0 6px 24px rgba(60, 60, 120, 0.12);
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
        }

        h1 {
            margin: 0 0 0.5rem 0;
            text-align: center;
            font-size: 2rem;
            font-weight: 600;
            color: #3b3b5c;
            letter-spacing: 0.02em;
        }

        .input-row {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .textarea-container {
            position: relative;
            width: 100%;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            font-size: 1.08rem;
            border-radius: 10px;
            border: 1.5px solid #c7d2fe;
            background: #f8fafc;
            resize: vertical;
            box-sizing: border-box;
            transition: border 0.2s;
        }

        textarea:focus {
            border-color: #6366f1;
            outline: none;
        }

        select {
            width: 100%;
            padding: 0.85rem 1.1rem;
            font-size: 1.08rem;
            border-radius: 10px;
            border: 1.5px solid #c7d2fe;
            background: #f8fafc;
            margin-bottom: 0.18rem;
            cursor: pointer;
            transition: border 0.2s, box-shadow 0.2s;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.07);
            appearance: none;
        }

        select:focus {
            border-color: #6366f1;
            outline: none;
            box-shadow: 0 0 0 2px #6366f133;
        }

        .output-container {
            flex: 1;
            position: relative;
            margin-bottom: 0.2rem;
            max-width: 100%;
            overflow-x: visible;
        }

        .output {
            width: 100%;
            padding: 1rem;
            background: #f3f4f6;
            border-radius: 10px;
            min-height: 60px;
            font-size: 1.08rem;
            color: #222;
            white-space: pre-wrap;
            word-break: break-word;
            box-sizing: border-box;
            border: 1.5px solid #c7d2fe;
            max-height: 300px;
            overflow-y: auto;
        }

        .icon-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: #ddd;
            color: #333;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.08);
            transition: background 0.2s, color 0.2s, width 0.2s cubic-bezier(0.4, 0, 0.2, 1), padding 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 8px;
            width: 36px;
            overflow: hidden;
            margin-right: 0;
            position: static !important;
        }

        .icon-btn svg {
            width: 24px;
            height: 24px;
            transform: scale(1.4);
            transition: transform 0.2s;
        }

        .icon-btn:hover,
        .icon-btn:focus {
            background: #aaa;
            color: #000;
            outline: none;
            width: 90px;
            padding: 8px 18px;
        }

        .icon-btn:hover svg,
        .icon-btn:focus svg {
            transform: scale(1.8);
        }

        .icon-btn span {
            opacity: 0;
            width: 0;
            transition: opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1), width 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .icon-btn:hover span,
        .icon-btn:focus span {
            opacity: 1;
            width: auto;
        }

        #clearBtn {
            margin-top: 0;
            margin-bottom: 0;
            min-width: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 8px;
        }

        #clearBtn svg {
            display: inline-block;
            vertical-align: middle;
            margin-right: 0px;
        }

        #clearBtn span {
            opacity: 1 !important;
            width: auto !important;
            transition: none !important;
        }

        #copyBtn {
            position: absolute;
            top: 12px;
            right: 12px;
            z-index: 2;
            background: #ddd;
            color: #333;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: background 0.2s, color 0.2s;
        }

        #copyBtn:hover,
        #copyBtn:focus {
            background: #aaa;
            color: #000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            outline: none;
        }

        .clear-btn-row {
            width: 100%;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            margin-bottom: 0.2rem;
            margin-top: -0.5rem;
        }

        .action-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0;
            padding-left: 0;
            padding-right: 0;
        }

        .status-bar {
            margin-top: 0.2rem;
            font-size: 1rem;
            color: #6366f1;
            text-align: left;
            min-height: 1.2em;
        }

        @media (max-width: 600px) {
            .container {
                max-width: 98vw;
                padding: 1.2rem 0.5rem;
                border-radius: 0;
                box-shadow: none;
            }

            h1 {
                font-size: 1.4rem;
            }

            textarea,
            .output,
            select {
                font-size: 1rem;
                padding: 0.7rem;
            }

            .icon-btn {
                font-size: 0.98rem;
                padding: 8px 12px;
            }

            #copyBtn {
                top: 8px;
                right: 8px;
            }

            select {
                font-size: 1.08rem;
                padding: 1rem 1.1rem;
                border-radius: 12px;
                min-height: 48px;
            }

            .icon-btn svg {
                transform: scale(2.5);
            }

            .icon-btn:hover svg,
            .icon-btn:focus svg {
                transform: scale(1.5);
            }
        }

        .output-row {
            display: flex;
            align-items: center;
            gap: 0;
        }

        .regen-icon {
            display: none;
            background: #f3f4f6;
            border: 1.5px solid transparent;
            color: #888;
            padding: 0;
            min-width: unset;
            width: 32px;
            height: 32px;
            cursor: pointer;
            margin-left: 0;
            margin-right: 0;
            position: static;
            transition: color 0.2s, border-color 0.2s, background 0.2s;
        }

        .regen-icon:hover,
        .regen-icon:focus {
            color: #333;
            outline: none;
            border-color: #e5e7eb;
            background: #e5e7eb;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Case Converter</h1>
        <div class="input-row">
            <div class="textarea-container">
                <textarea id="inputText" placeholder="Enter your text here..." aria-label="Input text"></textarea>
            </div>
        </div>
        <div class="clear-btn-row">
            <button class="icon-btn" id="clearBtn" title="Clear input" aria-label="Clear input" type="button"
                tabindex="0">
                <span>Clear</span>
            </button>
        </div>
        <select id="caseSelector" aria-label="Select case mode">
            <option value="lower">lowercase</option>
            <option value="upper">UPPERCASE</option>
            <option value="title">Title Case</option>
            <option value="snake">snake_case</option>
            <option value="kebab">kebab-case</option>
            <option value="pascal">PascalCase</option>
            <option value="camel">camelCase</option>
            <option value="mockingSpongebob">mOcKiNg sPoNgEbOb</option>
        </select>
        <div class="action-row">
            <div style="flex:1; display:flex; align-items:center; justify-content:flex-start;">
                <button class="regen-icon" id="regenBtn" title="Regenerate text" aria-label="Regenerate text" type="button" tabindex="0" style="display:none;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22" style="display:block; margin:auto;">
                        <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.13-.32 2.18-.87 3.07l1.46 1.46A7.963 7.963 0 0 0 20 12c0-4.42-3.58-8-8-8zm-6.59.59L4.87 6.05A7.963 7.963 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3c-3.31 0-6-2.69-6-6 0-1.13.32-2.18.87-3.07z"/>
                    </svg>
                </button>
            </div>
            <div style="display:flex; align-items:center; justify-content:flex-end;">
                <button class="icon-btn" id="copyBtn" title="Copy text" aria-label="Copy text" type="button" tabindex="0">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M5.503 4.627L5.5 6.75v10.504a3.25 3.25 0 0 0 3.25 3.25h8.616a2.25 2.25 0 0 1-2.122 1.5H8.75A4.75 4.75 0 0 1 4 17.254V6.75c0-.98.627-1.815 1.503-2.123M17.75 2A2.25 2.25 0 0 1 20 4.25v13a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-13A2.25 2.25 0 0 1 8.75 2zm0 1.5h-9a.75.75 0 0 0-.75.75v13c0 .414.336.75.75.75h9a.75.75 0 0 0 .75-.75v-13a.75.75 0 0 0-.75-.75" />
                    </svg>
                    <span>Copy</span>
                </button>
            </div>
        </div>
        <div class="output-row">
            <div class="output-container">
                <div class="output" id="outputText" aria-label="Converted output" tabindex="0"></div>
            </div>
        </div>
        <div class="status-bar" id="statusBar" aria-live="polite"></div>
    </div>

    <script>
        let currentMode = "lower";
        const inputText = document.getElementById("inputText");
        const outputText = document.getElementById("outputText");
        const caseSelector = document.getElementById("caseSelector");
        const clearBtn = document.getElementById("clearBtn");
        const copyBtn = document.getElementById("copyBtn");
        const regenBtn = document.getElementById("regenBtn");
        const statusBar = document.getElementById("statusBar");

        function toTitleCase(text) {
            // Use regex to split words, map, and join efficiently
            return text.replace(/\w\S*/g, word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase());
        }

        function toSnakeCase(text) {
            return text
                .replace(/([a-z])([A-Z])/g, '$1_$2')
                .replace(/\s+/g, '_')
                .replace(/[^a-zA-Z0-9_]/g, '')
                .toLowerCase();
        }

        function toKebabCase(text) {
            return text
                .replace(/([a-z])([A-Z])/g, '$1-$2')
                .replace(/\s+/g, '-')
                .replace(/[^a-zA-Z0-9-]/g, '')
                .toLowerCase();
        }

        function toPascalCase(text) {
            return text
                .replace(/([a-z])([A-Z])/g, '$1 $2')
                .replace(/[^a-zA-Z0-9 ]/g, ' ')
                .split(/\s+/)
                .map(word => word ? word.charAt(0).toUpperCase() + word.slice(1).toLowerCase() : '')
                .join('');
        }

        function toCamelCase(text) {
            let pascal = toPascalCase(text);
            return pascal ? pascal.charAt(0).toLowerCase() + pascal.slice(1) : '';
        }

        function tomockingSpongebobCase(text) {
            // Randomize case for each letter, but ensure not all upper or all lower
            if (!text.match(/[a-zA-Z]/)) return text;
            let result = '';
            let hasUpper = false, hasLower = false;
            do {
                result = text.split('').map(char => {
                    if (/[a-zA-Z]/.test(char)) {
                        if (Math.random() < 0.5) {
                            hasLower = true;
                            return char.toLowerCase();
                        } else {
                            hasUpper = true;
                            return char.toUpperCase();
                        }
                    }
                    return char;
                }).join('');
                // Reset flags if not valid
                if (!(hasUpper && hasLower)) {
                    hasUpper = false;
                    hasLower = false;
                }
            } while (!(hasUpper && hasLower));
            return result;
        }

        function convertCase(text) {
            switch (currentMode) {
                case "upper":
                    return text.toUpperCase();
                case "lower":
                    return text.toLowerCase();
                case "title":
                    return toTitleCase(text);
                case "snake":
                    return toSnakeCase(text);
                case "kebab":
                    return toKebabCase(text);
                case "pascal":
                    return toPascalCase(text);
                case "camel":
                    return toCamelCase(text);
                case "mockingSpongebob":
                    return tomockingSpongebobCase(text);
                default:
                    return text;
            }
        }

        let updateTimeout = null;
        let lastOutput = "";

        function updateOutput() {
            requestAnimationFrame(() => {
                const input = inputText.value;
                let converted;
                if (currentMode === "mockingSpongebob") {
                    converted = tomockingSpongebobCase(input);
                    outputText.textContent = converted;
                    lastOutput = converted;
                    regenBtn.style.display = "inline-block";
                } else {
                    converted = convertCase(input);
                    if (converted !== lastOutput) {
                        outputText.textContent = converted;
                        lastOutput = converted;
                    }
                    regenBtn.style.display = "none";
                }
            });
        }

        function showStatus(msg, timeout = 1500) {
            statusBar.textContent = msg;
            if (timeout > 0) {
                setTimeout(() => { statusBar.textContent = ""; }, timeout);
            }
        }

        function copyOutput() {
            if (copyBtn.disabled) return;
            copyBtn.disabled = true;
            const outputBtn = copyBtn.querySelector("span");
            const output = outputText.textContent;
            if (output.trim() !== "") {
                requestAnimationFrame(() => {
                    navigator.clipboard.writeText(output).then(() => {
                        outputBtn.textContent = "Copied!";
                        showStatus("Copied to clipboard!");
                        setTimeout(() => {
                            outputBtn.textContent = "Copy";
                            copyBtn.disabled = false;
                        }, 1000);
                    }).catch(() => {
                        showStatus("Copy failed", 1200);
                        copyBtn.disabled = false;
                    });
                });
            } else {
                showStatus("Nothing to copy", 1200);
                copyBtn.disabled = false;
            }
        }

        function clearInput() {
            inputText.value = "";
            updateOutput();
            showStatus("Input cleared", 1200);
            inputText.focus();
        }

        // Accessibility: Enter on clear/copy buttons
        clearBtn.addEventListener("keydown", e => {
            if (e.key === "Enter" || e.key === " ") {
                clearInput();
            }
        });
        copyBtn.addEventListener("keydown", e => {
            if (e.key === "Enter" || e.key === " ") {
                copyOutput();
            }
        });

        // Event listeners
        inputText.addEventListener("input", updateOutput);
        caseSelector.addEventListener("change", (e) => {
            currentMode = e.target.value;
            updateOutput();
        });
        clearBtn.addEventListener("click", clearInput);
        copyBtn.addEventListener("click", copyOutput);
        regenBtn.addEventListener("click", () => {
            // Only rerun mockingSpongebob case
            if (currentMode === "mockingSpongebob") {
                const input = inputText.value;
                const converted = tomockingSpongebobCase(input);
                outputText.textContent = converted;
                lastOutput = converted;
            }
        });

        // Ensure output box allows Ctrl+A to select all its text only
        outputText.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'a') {
                e.preventDefault();
                const range = document.createRange();
                range.selectNodeContents(outputText);
                const sel = window.getSelection();
                sel.removeAllRanges();
                sel.addRange(range);
            }
        });

        // Initial render and focus
        window.onload = () => {
            lastOutput = "";
            updateOutput();
            inputText.focus();
        };
    </script>
</body>

</html>